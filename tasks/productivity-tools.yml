- name: Install productivity tools - Arch
  become: true
  pacman:
    name:
      - wireshark-qt
      - libreoffice-still
    state: present
  tags:
    - productivity
  when: ansible_os_family == "Archlinux"

- name: Install wireshark - Mac
  community.general.homebrew:
    name: wireshark
    state: present
  when: ansible_distribution == 'MacOSX'
  tags:
    - mac-setup
    - productivity

# installs, but throws an error
#- name: Install libreoffice - Mac
#  community.general.homebrew:
#    name: homebrew/cask/libreoffice
#    state: present
#  when: ansible_distribution == 'MacOSX'
#  tags:
#    - mac-setup
#    - productivity

# installs, but mac doesn't like it (can't verify it's not malware)
#- name: Install flameshot - Mac
#  community.general.homebrew:
#    name: homebrew/cask/flameshot
#    state: present
#  when: ansible_distribution == 'MacOSX'
#  tags:
#    - mac-setup
#    - productivity

# installs, but throws an error
# - name: Install gimp - Mac
#   community.general.homebrew:
#     name: homebrew/cask/gimp 
#     state: present
#   when: ansible_distribution == 'MacOSX'
#   tags:
#     - mac-setup
#     - productivity

- name: Install xclip - Mac
  community.general.homebrew:
    name: xclip
    state: present
  when: ansible_distribution == 'MacOSX'
  tags:
    - mac-setup
    - productivity

- name: Install productivity tools - Debian
  become: true
  apt:
    name:
      - wireshark
      - libreoffice
      - poppler-utils
  tags:
    - productivity
  when: ansible_os_family == "Debian"

- name: poppler (pdftoppm) - Install from AUR - Arch
  ansible.builtin.command: paru --noconfirm -S poppler
  tags:
    - productivity
  when: ansible_os_family == "Archlinux"

- name: Install productivity tools - Common
  become: true
  ansible.builtin.package:
    name:
      - fzf
      - gimp
      - xclip
      - screenkey
      - tldr
      - ripgrep
      - maim
      - flameshot
      - jq
      - qutebrowser
      # - zoxide
    state: present
  when: ansible_distribution != "MacOSX"
  tags:
    - productivity

- name: Install Github CLI
  become: true
  ansible.builtin.shell:
    'curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg | dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg \
    && chmod go+r /usr/share/keyrings/githubcli-archive-keyring.gpg \
    && echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null \
    && apt update \
    && apt install gh -y'
  tags:
    - productivity
    - git
  when: ansible_os_family == "Debian"

- name: Install Github CLI
  become: true
  ansible.builtin.pacman:
    name: github-cli
  tags:
    - productivity
    - git
  when: ansible_os_family == "Archlinux"
