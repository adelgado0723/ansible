- name: Install System Packages 1 - Arch (base-devel, cmake, pkgconf)
  become: true
  pacman:
    name: ['base-devel', 'cmake', 'pkgconf']
    state: present
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Archlinux"
- name: Install System Packages 2 - Arch (lua, unzip, libtool, gettext)
  become: true
  pacman:
    name: ['lua', 'unzip', 'libtool', 'gettext']
    state: present
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Archlinux"

- name: Install System Packages 3 - Arch
  become: true
  pacman:
    name:
      [
        'picom',
        'curl',
        'htop',
        'go',
        'lsof',
        'qtile',
        'ccache',
        'ninja',
        'python-pip',
        'python',
        'dconf-editor',
        'nvidia-settings',
        'pavucontrol',
        'moreutils',
        'clang',
        'pandoc',
        'figlet',
        'cowsay',
        'fortune-mod',
        'nitrogen',
        'freetype2',
        'make',
        'libxcb',
        'libxkbcommon',
        'pkg-config',
        'fontconfig',
        'mpd',
        'brave-bin',
        'networkmanager',
        'networkmanager-openvpn',
        'network-manager-applet',
      ]
    state: present
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Archlinux"

- name: Install System Packages 1 - Debian (build-essential, cmake, pkg-config, pthread)
  become: true
  apt:
    name: ['build-essential', 'cmake', 'pkg-config', 'libpthread-stubs0-dev']
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"

- name: Install System Packages 2 - Debian (lua, unzip, libtool, libtool-bin, gettext)
  become: true
  apt:
    name: ['lua5.1', 'unzip', 'libtool', 'libtool-bin', 'gettext']
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"

- name: Install System Packages 3 - Debian (the rest)
  become: true
  apt:
    name:
      [
        'compton',
        'curl',
        'htop',
        'lsof',
        'ccache',
        'ninja-build',
        'python3-pip',
        'python3',
        'dconf-editor',
        'nvidia-settings',
        'pavucontrol',
        'moreutils',
        'clangd',
        'libx11-dev',
        'libxinerama-dev',
        'libxft-dev',
        'apt-file',
        'pandoc',
        'libxrandr-dev',
        'libxpm-dev',
        'figlet',
        'cowsay',
        'nitrogen',
        'mpd',
        'fortune',
        'libfreetype6-dev',
        'libfontconfig1-dev',
        'libxcb-xfixes0-dev',
        'libxkbcommon-dev ',
        'network-manager',
        'network-manager-openvpn',
        'ubuntu-mate-desktop',
      ]
  tags:
    - install
    - core
  when: ansible_os_family == "Debian"


- name: Install golang - add repo - Debian
  become: true
  shell: add-apt-repository ppa:longsleep/golang-backports
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"
- name: Install golang - Debian
  become: true
  apt:
    name: "golang-go"
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"



# xcffib
- name: install xcffiv
  ansible.builtin.pip:
    name: xcffib
  tags:
    - install
    - core
  when: ansible_os_family == "Debian"

# qtile
- name: install qtile
  ansible.builtin.pip:
    name: qtile
  tags:
    - install
    - core
  when: ansible_os_family == "Debian"

- name: Install Clang - Debian
  become: true
  apt:
    name:
      [
        'clang',
        'clang-11',
        'clang-12',
        'clangd',
        'clangd-10',
        'clangd-11',
        'clangd-12',
      ]
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"

- name: dconf qtile
  shell: dconf write /org/mate/desktop/session/required-components/windowmanager "'qtile'"
  tags:
    - install
    - core
  when: ansible_os_family == "Debian"

- name: dconf qtile
  shell: dconf write /org/mate/desktop/background/show-desktop-icons "false"
  tags:
    - install
    - core
  when: ansible_os_family == "Debian"
# enable mpd
#
# enable networkmanager
#
- name: Enable service httpd and ensure it is not masked
  ansible.builtin.systemd:
    name: NetworkManager
    enabled: yes
    masked: no

# start networkmanager
- name: Make sure a networkmanager is running
  ansible.builtin.systemd:
    state: started
    name: NetworkManager

