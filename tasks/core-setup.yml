- name: Install System Packages 1 - Arch (base-devel, cmake, pkgconf)
  become: true
  ansible.builtin.pacman:
    name: ['base-devel', 'cmake', 'pkgconf']
    state: present
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Archlinux"

- name: Install System Packages 2 - Arch (lua, unzip, libtool, gettext)
  become: true
  ansible.builtin.pacman:
    name: ['lua', 'unzip', 'libtool', 'gettext']
    state: present
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Archlinux"

- name: Install System Packages 3 - Arch
  become: true
  ansible.builtin.pacman:
    name:
      [
        'picom',
        'paru',
        'curl',
        'wget',
        'htop',
        'lsof',
        'ccache',
        'ninja',
        'python-pip',
        'python',
        'dconf-editor',
        'nvidia-settings',
        'pavucontrol',
        'moreutils',
        'clang',
        'pandoc',
        'figlet',
        'cowsay',
        'fortune-mod',
        'nitrogen',
        'freetype2',
        'make',
        'libxcb',
        'libxkbcommon',
        'pkg-config',
        'fontconfig',
        'brave-bin',
        'networkmanager',
        'networkmanager-openvpn',
        'network-manager-applet',
        'cups',
      ]
    state: present
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Archlinux"

- name: Install System Packages 1 - Debian (build-essential, cmake, pkg-config, pthread)
  become: true
  ansible.builtin.apt:
    name: ['build-essential', 'cmake', 'pkg-config', 'libpthread-stubs0-dev']
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"

- name: Install System Packages 2 - Debian (lua, unzip, libtool, libtool-bin, gettext)
  become: true
  ansible.builtin.apt:
    name: ['lua5.1', 'unzip', 'libtool', 'libtool-bin', 'gettext']
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"

- name: Install System Packages 3 - Debian (the rest)
  become: true
  ansible.builtin.apt:
    name:
      [
        'compton',
        'curl',
        'wget',
        'htop',
        'lsof',
        'ccache',
        'ninja-build',
        'python3-pip',
        'python3',
        'dconf-editor',
        'nvidia-settings',
        'pavucontrol',
        'moreutils',
        'clangd',
        'libx11-dev',
        'libxinerama-dev',
        'libxft-dev',
        'apt-file',
        'pandoc',
        'libxrandr-dev',
        'libxpm-dev',
        'figlet',
        'cowsay',
        'nitrogen',
        'fortune',
        'libfreetype6-dev',
        'libfontconfig1-dev',
        'libxcb-xfixes0-dev',
        'libxkbcommon-dev ',
        'network-manager',
        'cups',
        'network-manager-openvpn',
      ]
  tags:
    - install
    - core
  when: ansible_os_family == "Debian"

- name: Install Clang - Debian
  become: true
  ansible.builtin.apt:
    name: ['clang', 'clang-11', 'clang-12', 'clangd', 'clangd-11', 'clangd-12']
  tags:
    - install
    - neovim
    - alacritty
    - core
  when: ansible_os_family == "Debian"

- name: Install commonly named packages (acpi, radiotray)
  become: true
  ansible.builtin.package:
    name:
      - acpi
      - radiotray
  tags:
    - install
    - neovim
    - alacritty
    - core

# start and enable networkmanager
- name: Start and ennable networkmanager. Ensure it is not masked.
  become: true
  ansible.builtin.systemd:
    state: started
    name: NetworkManager
    enabled: true
    masked: false
  tags:
    - install
    - core

# start and enable cups
- name: Start and enable cups. Ensure it is not masked.
  become: true
  ansible.builtin.systemd:
    name: cups.socket
    enabled: true
    masked: false
  tags:
    - install
    - core
